(this.webpackJsonptictactoe=this.webpackJsonptictactoe||[]).push([[0],{110:function(e,t,n){e.exports=n.p+"static/media/logo.cb82ab9f.png"},113:function(e,t,n){e.exports=n(114)},114:function(e,t,n){"use strict";n.r(t);var a=n(111),o=n(25),r=n(26),i=n(28),c=n(27),u=n(112),s=n(109),l=n.n(s),p=n(2),d=n.n(p),m=(n(119),n(110)),h=n.n(m),f=n(120),g="https://fierce-oasis-65802.herokuapp.com";var y=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onClickPlay=function(){var t=document.getElementById("gcInput"),n=t.value;""===n?t.value="":e.props.connectGame(n)},e.newGame=function(){e.props.newGame()},e}return Object(r.a)(n,[{key:"render",value:function(){return d.a.createElement("div",{id:"playMenu",className:"centeredDiv"},d.a.createElement("img",{src:h.a,alt:"Logo"}),d.a.createElement("input",{id:"gcInput",type:"text",placeholder:"enter game code"}),d.a.createElement("br",null),d.a.createElement("button",{onClick:this.onClickPlay},"Connect"),d.a.createElement("br",null),d.a.createElement("button",{onClick:this.newGame},"Create new Game"))}}]),n}(d.a.Component),v=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onClick=function(){fetch(g+"/place",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerID:e.props.playerID,gameCode:e.props.gameCode,index:e.props.index})}).then((function(e){return e.json()})).then((function(t){void 0!==t.message?e.props.updateText(t.message):e.props.updateBoard(t)}))},e}return Object(r.a)(n,[{key:"render",value:function(){return d.a.createElement("div",{className:"box"},d.a.createElement("button",{className:this.props.highlight?"field highlight":"field",onClick:this.onClick},0===this.props.value?"":1===this.props.value?"X":"O"))}}]),n}(d.a.Component),C=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).updateBoard=function(e){if(Array.isArray(e)){var t=0;e.map((function(e){0===e&&(t+=1)})),t%2===1&&r.props.player1||t%2===0&&!r.props.player1?r.updateText("It's your turn!"):r.updateText("Waiting for opponent to move!");var n=function(e){return e[0]===e[1]&&e[1]===e[2]?[e[1],[0,1,2]]:e[3]===e[4]&&e[4]===e[5]?[e[4],[3,4,5]]:e[6]===e[7]&&e[7]===e[8]?[e[7],[6,7,8]]:e[0]===e[3]&&e[3]===e[6]?[e[3],[0,3,6]]:e[1]===e[4]&&e[4]===e[7]?[e[4],[1,4,7]]:e[2]===e[5]&&e[5]===e[8]?[e[5],[2,5,8]]:e[0]===e[4]&&e[4]===e[8]?[e[0],[0,4,8]]:e[2]===e[4]&&e[4]===e[6]?[e[4],[2,4,6]]:[0,[]]}(e),o=Object(a.a)(n,2),i=o[0],c=o[1];0!==c.length&&0!==i?r.updateText("Player "+i+" won!"):0===t&&r.updateText("Tie!"),r.setState({board:e,win:c})}else r.updateText("Waiting for Player 2 to connect..")},r.fetchBoard=function(){fetch(g+"/games/"+r.state.gameCode).then((function(e){return e.json()})).then((function(e){r.updateBoard(e)}))},r.updateText=function(e){document.getElementById("message").innerText=e},r.state={board:[0,0,0,0,0,0,0,0,0],win:[],gameCode:e.gameCode},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.fetchBoard(),this.timerID=setInterval((function(){return e.fetchBoard()}),3e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){var e=this,t=this.state.board.map((function(t,n){return d.a.createElement(v,{key:n,value:t,index:n,playerID:e.props.playerID,highlight:e.state.win.includes(n),gameCode:e.props.gameCode,updateText:e.updateText,updateBoard:e.updateBoard})}));return d.a.createElement("div",{id:"game",className:"centeredDiv"},d.a.createElement("h1",{id:"message"},"Waiting for Player 2 to connect.."),t)}}]),n}(d.a.Component),b=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).connectGame=function(e){var t=f.randomBytes(8).toString("hex");fetch(g+"/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerID:t,gameCode:e})}).then((function(e){return e.json()})).then((function(n){void 0===n.message?(a.setState({gameCode:e,playerID:t,player1:!1}),window.history.pushState(null,"","/game/"+e.toString())):alert(n.message)}))},a.newGame=function(){var e=f.randomBytes(8).toString("hex");fetch(g+"/new-game",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerID:e})}).then((function(e){return e.json()})).then((function(t){void 0===t.message?(a.setState({gameCode:t.gameCode,playerID:e,player1:!0}),window.history.pushState(null,"","/game/"+t.gameCode)):alert(t.message)}))},a.updateRouting=function(e){if(e.pathname.startsWith("/game/")&&!a.state.inGame){var t=e.pathname.replace("/game/","");""===t||void 0===a.state.playerID?(window.history.pushState(null,"","/"),a.setState({gameCode:-1})):a.setState({gameCode:t})}else a.setState({gameCode:-1})};var r=Object(u.a)();return a.unlisten=r.listen((function(e){a.updateRouting(e.location)})),a.state={gameCode:-1},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.updateRouting(window.location)}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){return d.a.createElement("div",{id:"app"},-1===this.state.gameCode?d.a.createElement(y,{connectGame:this.connectGame,newGame:this.newGame}):d.a.createElement(C,{gameCode:this.state.gameCode,playerID:this.state.playerID,player1:this.state.player1}))}}]),n}(d.a.Component);l.a.render(d.a.createElement(b,null),document.getElementById("root"))},119:function(e,t,n){},124:function(e,t){},126:function(e,t){},136:function(e,t){},138:function(e,t){},165:function(e,t){},166:function(e,t){},171:function(e,t){},173:function(e,t){},180:function(e,t){},199:function(e,t){}},[[113,1,2]]]);
//# sourceMappingURL=main.2fc49267.chunk.js.map